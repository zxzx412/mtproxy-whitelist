# NAT+HAProxy模式策略配置
# 用于主机网络模式，HAProxy接收外部连接，通过PROXY Protocol转发到nginx

export STRATEGY_NAME="nat-haproxy"
export NETWORK_MODE="host"
export HAPROXY_ENABLED="true"

# 端口配置（HAProxy模式nginx监听PROXY Protocol端口）
# HAProxy监听外部端口，nginx监听内部PROXY Protocol端口
export INTERNAL_NGINX_STREAM_PORT="${INTERNAL_PROXY_PROTOCOL_PORT}"
export INTERNAL_NGINX_WEB_PORT="${EXTERNAL_WEB_PORT}"

# 配置模板选择
export NGINX_TEMPLATE="nginx-haproxy.conf.template"

# 健康检查命令
export HEALTHCHECK_CMD="curl -f http://localhost:${EXTERNAL_WEB_PORT}/health"
